@model asistenteventas.Models.Usuario

@{
    ViewData["Title"] = "Edit";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>

    <!-- Vincula el archivo CSS externo -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css">
</head>
<body>

<div class="container">
    <div>
        <p id="result"></p>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <form id="formvendedor" asp-action="Edit">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="id" />
                <div class="form-group">
                    <label asp-for="nombre" class="control-label"></label>
                    <input asp-for="nombre" required id="nombre" class="form-control" />
                    <span asp-validation-for="nombre" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="passsword" class="control-label"></label>
                    <input asp-for="passsword" required id="contrasenia" class="form-control" />
                    <span asp-validation-for="passsword" class="text-danger"></span>
                </div>
                <br />
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Guardar</button>|
                    <a asp-controller="Administradors" asp-action="Index" class="btn btn-secondary">Volver a al lista</a>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>

@section Scripts {
    <script>
        document.querySelector("#formvendedor").addEventListener("submit", ValidarDatos);

        function ValidarDatos(event) {
            event.preventDefault();
            document.querySelector("#result").innerHTML = "";
            let nombre = document.querySelector("#nombre").value;
            let contrasenia = document.querySelector("#contrasenia").value;
            if (nombre.length >= 3) {
                if (validar_clave(contrasenia)) {
                    this.submit();
                }
            } else {
                document.querySelector("#result").innerHTML = "Nombre debe ser mínimo 3 caracteres <br>";
            }
        }

        function validar_clave(contrasenia) {
            if (contrasenia.length >= 6) {
                var mayuscula = false;
                var minuscula = false;
                var numero = false;
                let result = "";

                for (let i = 0; i < contrasenia.length; i++) {
                    if (contrasenia.charCodeAt(i) >= 65 && contrasenia.charCodeAt(i) <= 90) {
                        mayuscula = true;
                    } else if (contrasenia.charCodeAt(i) >= 97 && contrasenia.charCodeAt(i) <= 122) {
                        minuscula = true;
                    } else if (contrasenia.charCodeAt(i) >= 48 && contrasenia.charCodeAt(i) <= 57) {
                        numero = true;
                    }
                }
                if (mayuscula && minuscula && numero) {
                    return true;
                } else {
                    if (!mayuscula) {
                        result = "Falta una letra mayúscula en el password <br>";
                    }
                    if (!minuscula) {
                        result += "Falta una letra minúscula en el password <br>";
                    }
                    if (!numero) {
                        result += "Falta un número en el password <br>";
                    }
                    document.querySelector("#result").innerHTML = result;
                }
            } else {
                result = "La contraseña debe tener al menos 6 caracteres";
                document.querySelector("#result").innerHTML = result;
            }
            return false;
        }
    </script>
}
